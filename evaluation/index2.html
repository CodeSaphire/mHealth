<!DOCTYPE html>
<html>
<head>
  <title>Mental Health Questionnaire</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
</head>
<body>
  <div class="container">
    <div class="personalization-container">
      <h2>Personalization</h2>
      <div class="form-group">
        <label for="name-input">Name:</label>
        <input type="text" class="form-control" id="name-input" placeholder="Enter your name">
      </div>
      <button class="btn btn-primary btn-name-submit">Submit</button>
    </div>

    <div class="question-container" style="display: none;">
      <div class="progress">
        <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
      <h2>Question <span class="question-number"></span></h2>
      <p class="question-text"></p>
      <div class="answers-container">
        <div class="custom-control custom-radio">
          <input type="radio" id="answer-yes" name="answer" class="custom-control-input" value="yes">
          <label class="custom-control-label" for="answer-yes">Yes</label>
        </div>
        <div class="custom-control custom-radio">
          <input type="radio" id="answer-no" name="answer" class="custom-control-input" value="no">
          <label class="custom-control-label" for="answer-no">No</label>
        </div>
      </div>
      <button class="btn btn-primary btn-next">Next</button>
      <button class="btn btn-primary btn-submit" style="display: none;">Submit</button>
    </div>

    <div class="result-container" style="display: none;">
      <div class="result-heading">Results</div>
      <div class="result-text"></div>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    $(document).ready(function() {
      var currentQuestion = 0;
      var numQuestions = $(".question-container").length;
      var answers = {};

      $(".btn-name-submit").click(function() {
        var name = $("#name-input").val();
        if (name.trim() === "") {
          alert("Please enter your name.");
          return;
        }
        $(".personalization-container").hide();
        $(".question-container").show();
        showQuestion(currentQuestion);
        updateProgress();
      });

      $(".btn-next").click(function() {
        var answer = $("input[name=answer]:checked").val();
        if (!answer) {
          alert("Please select an answer.");
          return;
        }
        answers["answer" + (currentQuestion + 1)] = answer;
        currentQuestion++;
        if (currentQuestion < numQuestions) {
          showQuestion(currentQuestion);
          updateProgress();
        } else {
          showResult();
        }
      });

      function showQuestion(questionIndex) {
        $(".question-number").text(questionIndex + 1);
        $(".question-text").text($(".question-container:eq(" + questionIndex + ") .question-text").text());
        $("input[name=answer]").prop("checked", false);
        $(".btn-submit").hide();
        if (questionIndex === numQuestions - 1) {
          $(".btn-next").hide();
          $(".btn-submit").show();
        }
      }

      function updateProgress() {
        var progress = ((currentQuestion + 1) / numQuestions) * 100;
        $(".progress-bar").css("width", progress + "%").attr("aria-valuenow", progress);
      }

      function showResult() {
        $(".question-container").hide();
        $(".result-container").show();

        var resultText = "<h3>Thank you for completing the questionnaire.</h3><h4>Here are your answers:</h4><ul>";
        for (var i = 0; i < numQuestions; i++) {
          resultText += "<li><strong>Question " + (i + 1) + ":</strong> " + $(".question-container:eq(" + i + ") .question-text").text() + "<br><strong>Answer:</strong> " + answers["answer" + (i + 1)] + "</li>";
        }
        resultText += "</ul>";
        $(".result-text").html(resultText);
      }
    });
  </script>
</body>
</html>
